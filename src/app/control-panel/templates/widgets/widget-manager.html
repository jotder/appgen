<div class="widget-config-manager">
    <div class="master-pane">
        <h2>Widget Configurations</h2>
        <div *ngIf="loading()">Loading...</div>
        <ul>
            <li (click)="select(config)" *ngFor="let config of configs()"
                [class.selected]="config.id === selected()?.id">
                {{ config.name }} ({{ config.widgetType }})
            </li>
        </ul>
        <button (click)="newConfig()">New Config</button>
    </div>

    <div *ngIf="selected() as config" class="detail-pane">
        <h3>{{ config.name }}</h3>
        <div class="config-form">
            <div>
                <label>Name:</label>
                <input (input)="onNameChange($event)" [value]="config.name">
            </div>
            <div>
                <label>Type:</label>
                <select (change)="onTypeChange($event)" [disabled]="!creating()" [value]="config.widgetType">
                    <option *ngFor="let type of types.list()" [value]="type.id">{{ type.name }}</option>
                </select>
            </div>

            <h4>Parameters</h4>
            <app-json-schema-form [(formData)]="formParams" [schema]="schemaOfSelected()"></app-json-schema-form>

            <div class="actions">
                <button (click)="save()">Save</button>
                <button (click)="remove(config)" *ngIf="!creating()">Delete</button>
                <button (click)="usage(config)" *ngIf="!creating()">Check Usage</button>
            </div>
        </div>
    </div>
</div>
